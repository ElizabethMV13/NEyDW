var peliculas = {
  "Beast1":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thrialler:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast2":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast3":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast4":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast5":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast6":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast7":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast8":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast9":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast10":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast11":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast12":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast13":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast14":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
  "Beast15":{
  anio: "2022",
  pais: "Estados Unidos",
  clasificacion: "B",
  duracion: "93",
  genero: "Aventura, Drama, Thriller",
  thriller:"https://www.youtube.com/watch?v=rM0aUSHSTf0",
  img:"static/img/bestia.jpg",
  sinopsis: "Un padre y sus dos hijas adolescentes se ven perseguidos por un enorme león rebelde que intenta demostrar que la sabana solo tiene un depredador ápice." 
  },
}

window.onload = function () {

  var $sidebar = document.querySelector(".carouselPeliculas");
  console.log($sidebar)
  var count = 1;
  
  //Se recorre lista de elementos
  Object.entries(peliculas).forEach(([titulo,datos]) => {

    //Se declaran elementos a crear
    var div = document.createElement("div");
    var divInterno = document.createElement("div");
    var img = document.createElement("img");
    var a = document.createElement("a");
    var verMas = document.createElement("a");
   // var p = document.createElement("p");
    var h3 = document.createElement("h3");

    if ( count < 5 ) { 
      div.setAttribute("class","carousel-item item-form  activate");
      div.setAttribute("style", "display: none;");
    }else{
      div.setAttribute("class","carousel-item item-form");
      div.setAttribute("style", "display: none;");
    }
 
    //Se insertan atributos y otros elementos necesarios
    div.setAttribute("id", `carousel-item_${count}`);
    div.setAttribute("valor", `${count}`);
    divInterno.setAttribute("id", `target-pelicula`);
    a.setAttribute("href", datos["thriller"]);
    a.setAttribute("target","_blank");
    img.setAttribute("src", datos["img"]);
    img.setAttribute("class", "img-anuncio");
    img.setAttribute("alt", `'portada_pelicula_'${titulo}`);
    const text = document.createTextNode(titulo);
    const verMasDiv = document.createTextNode("   Ver más... ");
    verMas.appendChild(verMasDiv);
   // const resumen = document.createTextNode(datos["sinopsis"]);
    
    //Se da orden deseado a los elementos
    a.appendChild(img); 
    h3.appendChild(text); 
   // p.appendChild(resumen); 
    divInterno.appendChild(a); 
    divInterno.appendChild(h3); 
    divInterno.appendChild(verMas); 
    //divInterno.appendChild(p); 
    div.appendChild(divInterno); 
    $sidebar.appendChild(div); 

    count = count + 1;


  });



  //Función que controla el movimiento
  function renderizarMargen(actual, siguiente) {console.log(actual +"   "+siguiente)
    document.getElementById(actual).classList.remove("activate");
    document.getElementById(siguiente).classList.add("activate");
  }

  let $botonRetroceder = document.querySelector('#retroceder');
  let $botonAvanzar = document.querySelector('#avanzar');

  const $elementosCarousel = document.querySelectorAll(".carousel-item");

  let tope = Object.entries(peliculas).length;

  //Función que da movimiento por el btn de avanzar
  $botonAvanzar.onclick = function (e) {
    $margenesActivos = document.querySelectorAll('.activate');
    bandera = true;
    numeros = [];
    $margenesActivos.forEach(element => {
      
      id = element.id;

      separa = id.split("_");
      
      numeroTaget = separa[1];

      numeros.push(numeroTaget);
    });
    console.log(numeros)
    valorInicial = numeros[0]

    valorFinal = parseInt(numeros[3]) + 1
    console.log(valorFinal)

    if(numeros[0] == 12 && numeros[1] == 13 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 1;
      valorInicial = 12;
    } 
    if(numeros[0] == 1 && numeros[1] == 13 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 2;
      valorInicial = 13;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 3;
      valorInicial = 14;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 3 && numeros[3] == 15){
      valorFinal = 4;
      valorInicial = 15;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 3 && numeros[3] == 4){
      valorFinal = 5;
      valorInicial = 1;
    } 

    renderizarMargen("carousel-item_" + valorInicial, "carousel-item_" + valorFinal);
    
    }
    
  //Función que da movimiento por el btn de retoceder
  $botonRetroceder.onclick = function (e) {
    $margenesActivos = document.querySelectorAll('.activate');
    bandera = true;
    numeros = [];
    $margenesActivos.forEach(element => {
      
      id = element.id;

      separa = id.split("_");
      
      numeroTaget = separa[1];

      numeros.push(numeroTaget);
    });
    console.log(numeros)
    
    
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 3 && numeros[3] == 4){
      console.log("bande3r")
      valorFinal = 15;
      valorInicial = 4;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 3 && numeros[3] == 15){
      valorFinal = 14;
      valorInicial = 3;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 13;
      valorInicial = 2;
    } 
    if(numeros[0] == 1 && numeros[1] == 13 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 12;
      valorInicial = 1;
    } 
    let valorMin =  Math.min(...numeros);
    if(valorMin < 13 && valorMin>4){
      valorInicial =  Math.max(...numeros);
      console.log(valorMin)
      valorFinal = valorMin-1;
    } 
    if(valorMin < 8 && valorMin>1){
      valorInicial =  Math.max(...numeros);
      console.log(valorMin)
      valorFinal = valorMin-1;
    } 
        
    renderizarMargen("carousel-item_" + valorInicial, "carousel-item_" + valorFinal);
  }
}