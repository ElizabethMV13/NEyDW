<!Doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Importando estilos -->
  <link rel="stylesheet" href="static/css/style.css">
  <title> JALEAD STUDIO | Cartelera </title> <!-- Esto es el título de la pagina -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lucaburgio/iconoir@main/css/iconoir.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<title>Grid2</title>
<head>
<body class = "grid-container-base">
  <!--Menu a desplegar de la pantalla completa-->
  <header class="header" id="top">
    <div class="btn-menu-icon">
      <label for="btn-menu" >
        <svg width="48px" height="48px" stroke-width="3" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="#000000">
          <path d="M3 5h18M3 12h18M3 19h18" stroke="#000000" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        </label>
      </div>
      <div class="container-menu-icon" id="navbarResponsive">
        <nav class="navbar-menu">
          <a style="font-size: 18px;margin-left: 8px;" href="sobre_nosotros.html">Acerca de </a>
          <a style="font-size: 18px;" href="cartelera.html">Cartelera</a>
          <a style="display: none" style="font-size: 18px;" href="registra-pelicula.html">Registrar pelicula</a>
          <a style="display: none" style="font-size: 18px;" href="registrate.html">Registrate</a>
          <a style="display: none" style="font-size: 18px;" href="inicio-sesion.html">Inicio de sesión</a>
          <a style="font-size: 18px;" href="logout.php">Cerrar sesión</a>
        </nav>
        
      </div>
      <div style="display: flex; margin: 2%; ">
        <p class="p-logo">JALEAD STUDIO </p>
        <a href="">
          <img class="logo" src="static/img/Logo.png" alt="Logo Equipo" > 
        </a><!-- Insertando imagen -->
      </div>
      <hr>
      
    </header>
    <!--Menu a desplegar para cualquier panatalla minimizada-->
    <input type="checkbox" id="btn-menu" >
      <div class="container-menu">
        <div class="cont-menu" >
          <nav>
            <a href="sobre_nosotros.html">Sobre Nosotros</a>
            <a href="cartelera.html">Cartelera</a>
            <a style="display: none" href="registra-pelicula.html">Registrar pelicula</a>
            <a style="display: none" href="registrate.html">Registrate</a>
            <a style="display: none" href="inicio-sesion.html">Inicio de sesión</a>
            <a href="logout.php">Cerrar sesión</a>
          </nav>
          <label for="btn-menu">
            <svg width="34px" height="34px" stroke-width="3" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="#000000">
            <path d="M6.758 17.243L12.001 12m5.243-5.243L12 12m0 0L6.758 6.757M12.001 12l5.243 5.243" stroke="#000000" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg>
          </label>
        </div>
      </div>

<article class="main-base" style=" display: inline;">
  <label class="btn_izq" id="retroceder" style=" padding: 18% 0% ; display: flex;">
    <i class="material-icons" style="font-size:110px">keyboard_arrow_left</i>
  </label>
  <div class="carouselPeliculas" style="display: flex; padding: 12% 5%; margin: 0%;" >
  </div>
  <label class="btn_der" id="avanzar" style=" padding: 31% 0% ;display: flex; position: absolute;" >
    <i class="material-icons" style="font-size:110px">keyboard_arrow_right</i>
  </label>
</article>

<article id="artTabla">
  <table id="tablaPelis">
  </table>
</article>

<script type="module">
  
import peliculas from './static/peliculas1.json' assert { type: 'json' };
let pelis = peliculas.peliculas
console.log({pelis})
window.onload = function () {
  let divTabla = document.getElementById('tablaPelis');
  console.log(divTabla);
  divTabla.innerHTML += `
  <thead>
    <tr>
      <th>Imagen</th>
      <th>Descripcion</th>
      <th>Sinopsis</th>
    </tr>
  </thead>
  <div class="tableScroll">
  <tbody>
    `
    
    pelis.forEach((e,i)=>{
      if(i<5){
        divTabla.innerHTML += `<tr>
                                  <td>
                                    <img src=${e.img}>
                                  </td>
                                  <td>
                                    
                                      <div>
                                        <a id="elemento${e.nombre}"> ${e.nombre}</a>
                                        <ul>
                                          <li> Nombre: ${e.nombre}</li>
                                          <li>Anio: ${e.anio}</li>
                                          <li>Pais: ${e.pais}</li>
                                          <li>Clasificacion: ${e.clasificacion}</li>
                                          <li>Genero: ${e.genero}</li>
                                          <li>Trailer: <a href=${e.trailer} target="_blank"> ver trailer</a> </li>
                                        </ul>
                                      </div>
                                  </td>
                                  <td>
                                    <p>${e.sinopsis}</p>
                                    <a href="#top"> ir arriba</a> </li>
                                  </td>
                                </tr>`
      }

      
    })
    
  divTabla.innerHTML += `</tbody>
                              </div>
                          `
  console.log(divTabla)

  var $sidebar = document.querySelector(".carouselPeliculas");
  
  var count = 1;

  //Se recorre lista de elementos
  pelis.forEach((e,i) => {

    //Se declaran elementos a crear
    var div = document.createElement("div");
    var divInterno = document.createElement("div");
    var img = document.createElement("img");
    var a = document.createElement("a");
   // var p = document.createElement("p");
    var h3 = document.createElement("h3");

    if ( count < 5 ) { 
      div.setAttribute("class","carousel-item item-form  activate");
      div.setAttribute("style", "display: none;");
    }else{
      div.setAttribute("class","carousel-item item-form");
      div.setAttribute("style", "display: none;");
    }

    //Se insertan atributos y otros elementos necesarios
    div.setAttribute("id", `carousel-item_${count}`);
    div.setAttribute("valor", `${count}`);
    divInterno.setAttribute("id", `target-pelicula`);
    //a.setAttribute("href", ``);
    a.href = `#elemento${e.nombre}`
    img.setAttribute("src", e.img);
    img.setAttribute("class", "img-anuncio");
    img.setAttribute("alt", `'portada_pelicula_'${e.nombre}`);
    const text = document.createTextNode(e.nombre);
    // const resumen = document.createTextNode(datos["sinopsis"]);
    
    //Se da orden deseado a los elementos
    a.appendChild(img); 
    h3.appendChild(text); 
    // p.appendChild(resumen); 
    divInterno.appendChild(a); 
    divInterno.appendChild(h3); 
    //divInterno.appendChild(p); 
    div.appendChild(divInterno); 
    $sidebar.appendChild(div); 
    
    count = count + 1;


  });
  
  
  
  //Función que controla el movimiento
function renderizarMargen(actual, siguiente) {
  console.log(actual +"   "+siguiente)
  document.getElementById(actual).classList.remove("activate");
  document.getElementById(siguiente).classList.add("activate");
}

let $botonRetroceder = document.querySelector('#retroceder');
let $botonAvanzar = document.querySelector('#avanzar');

const $elementosCarousel = document.querySelectorAll(".carousel-item");
console.log({$elementosCarousel})
  //let tope = Object.entries(peliculas).length;
  
  //Función que da movimiento por el btn de avanzar
  $botonAvanzar.onclick = function (e) {
    let $margenesActivos = document.querySelectorAll('.activate');
    console.log({$margenesActivos})
    let bandera = true;
    let numeros = [];
    $margenesActivos.forEach(element => {
      let id = element.id;
      let separa = id.split("_");
      
      let numeroTaget = separa[1];
      
      numeros.push(numeroTaget);
    });
    console.log({numeros})
    let valorInicial = numeros[0]
    
    let valorFinal = parseInt(numeros[3]) + 1
    console.log({valorInicial,valorFinal})
    
    if(numeros[0] == 12 && numeros[1] == 13 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 1;
      valorInicial = 12;
    } 
    if(numeros[0] == 1 && numeros[1] == 13 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 2;
      valorInicial = 13;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 3;
      valorInicial = 14;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 3 && numeros[3] == 15){
      valorFinal = 4;
      valorInicial = 15;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 3 && numeros[3] == 4){
      valorFinal = 5;
      valorInicial = 1;
    } 
    
    renderizarMargen("carousel-item_" + valorInicial, "carousel-item_" + valorFinal);
    
    
  }
  
  //Función que da movimiento por el btn de retoceder
  $botonRetroceder.onclick = function (e) {
    let $margenesActivos = document.querySelectorAll('.activate');
    let bandera = true;
    let numeros = [];
    $margenesActivos.forEach(element => {
      
      let id = element.id;
      
      let separa = id.split("_");
      
      let numeroTaget = separa[1];
      
      numeros.push(numeroTaget);
    });
    console.log({numeros})
    let valorInicial = numeros[0]
    
    let valorFinal = parseInt(numeros[3]) + 1
    
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 3 && numeros[3] == 4){
      console.log("bande3r")
      valorFinal = 15;
      valorInicial = 4;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 3 && numeros[3] == 15){
      valorFinal = 14;
      valorInicial = 3;
    } 
    if(numeros[0] == 1 && numeros[1] == 2 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 13;
      valorInicial = 2;
    } 
    if(numeros[0] == 1 && numeros[1] == 13 && numeros[2] == 14 && numeros[3] == 15){
      valorFinal = 12;
      valorInicial = 1;
    } 
    let valorMin =  Math.min(...numeros);
    if(valorMin < 13 && valorMin>4){
      valorInicial =  Math.max(...numeros);
      console.log(valorMin)
      valorFinal = valorMin-1;
    } 
    if(valorMin < 8 && valorMin>1){
      valorInicial =  Math.max(...numeros);
      console.log(valorMin)
      valorFinal = valorMin-1;
    } 
    
    renderizarMargen("carousel-item_" + valorInicial, "carousel-item_" + valorFinal);
  }
  
}
</script>
</body>
<style>
  label{
    font-weight: bold;
    font-size: 20px;
    
    color: rgb(67, 67, 67);
  }
  li{
    list-style: none;
    margin: 0.5%;
  }
  p{
    font-size: 16px;
    margin: 0.5%;
    color: rgb(105, 104, 104);
  }
  h1{
    color: rgb(59, 58, 58);
    font-weight: bold;
    font-size: 28px;
  }
  .item-form{
    width: 18%;
    height: 20%;
    display: flex;
  }
  
#target-pelicula{
    width: 10%;
    height: 10%;
    float:right;
    margin: 15% 1.5% ;
  }
  
#artTabla{
  width: 100px;
  height: 100px;
  position: absolute;
  top: 100%;
  left: 35%;
  margin: -50px 0 0 -50px;
}
.tableScroll{
  overflow:auto;
  display: block;
}
#tablaPelis{
  table-layout: fixed;
  border-collapse: collapse;
  margin: 25px 0;
  font-size: 0.9em;
  font-family: sans-serif;
  min-width: 400px;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
}


#tablaPelis thead tr{
  background-color: #0f0098;
  color: #ffffff;
  text-align: center;
  display: flex;
}

#tablaPelis tbody tr {
  border-bottom: 1px solid #dddddd;
  display: flex;
}

#tablaPelis tbody tr:nth-of-type(even) {
  background-color: #f3f3f3;
}

#tablaPelis tbody tr:last-of-type {
  border-bottom: 2px solid #393944;
}

#tablaPelis tbody tr.active-row {
  font-weight: bold;
  color: #009879;
}

#tablaPelis th,
#tablaPelis td {
  padding: 15px 15px;
}

#tablaPelis th {
  font-size: .85em;
  letter-spacing: .1em;
  text-transform: uppercase;
}

@media screen and (max-width: 600px) {
  #tablaPelis {
    border: 0;
  }
  #tablaPelis caption {
    font-size: 1.3em;
  }
  #tablaPelis thead {
    display: none;
  }
  #tablaPelis tr {
    border-bottom: 3px solid #ddd;
    display: block;
    margin-bottom: .625em;
  }
  #tablaPelis td {
    border-bottom: 1px solid #ddd;
    display: block;
    font-size: .8em;
    text-align: right;
  }
  #tablaPelis td:before {
    content: attr(data-label);
    float: left;
    font-weight: bold;
    text-transform: uppercase;
  }
  #tablaPelis td:last-child {
    border-bottom: 0;
  }
}
.footer { 
  background-color: #1b3039;
  height: 13%;
  padding: 5px 10%;
  bottom: -40% !important; /*-40 para cuando la pantalla es de telefono*/
  position: absolute;
  width: 100%;
}


</style>
</html>